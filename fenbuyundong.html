<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="智能社 - zhinengshe.com" />
<meta name="copyright" content="智能社 - zhinengshe.com" />
<title>智能社 - www.zhinengshe.com</title>
<style>
*{margin:0;padding:0;list-style:none;}
body{
    background: #ccc;
}
#div1{ position:relative;width:834px; height:500px; margin:100px auto; overflow:hidden; background: #fff;}
#div1 ul{ position:absolute;left:0;top:50%; margin-top:-90px;width:20000px; height:180px;}
#div1 ul li{ position:relative;float:left;width:260px; height:180px;padding:0 10px;}
#div1 ul li img{width:260px; height:180px;}
</style>
<script>
function $(fn){
    if(document.addEventListener){
        document.addEventListener("DOMContentLoaded",fn,false);
    }else{
        document.attachEvent("onreadystatechange", function(){
            if(document.readyState=="complete"){
                fn && fn();
            }
        });
    };
};

$(function(){
    var oDiv = document.getElementById("div1");
    var oUl = oDiv.children[0];
    var aLi = oUl.children;
    var W = oDiv.offsetWidth/2;
    oUl.onmousedown=function(ev){
        var oEv = ev || event;
        var disX = oEv.clientX - oUl.offsetLeft;

        document.onmousemove=function(ev){
            var oEv = ev || event;
            var l = oEv.clientX-disX;
            if(l >W - aLi[0].offsetWidth*(0 + 0.5) ){
                l  = W- aLi[0].offsetWidth*(0 + 0.5) ;
            } else if(l < W - aLi[0].offsetWidth*(6 + 0.5) ) {
                l  = W - aLi[0].offsetWidth*(6 + 0.5) ;  
            }
            oUl.style.left = l+"px";
            toBig();
        };
        document.onmouseup=function(){
            document.onmousemove=document.onmouseup=null;
            oUl.releaseCapture && oUl.releaseCapture();
        };
        oUl.setCapture && oUl.setCapture();
        return false;
    };
    toBig();
    function toBig(){
        for (var i = 0; i < aLi.length; i++) {
            var dis = Math.abs(W-oUl.offsetLeft-aLi[i].offsetLeft-aLi[i].offsetWidth/2);
            var scale = 1-dis/600;
            scale<0.5 && (scale=0.5);
            var oImg = aLi[i].children[0];
            oImg.style.width=parseInt(520*scale)+"px";
            oImg.style.height=parseInt(360*scale)+"px";
            oImg.style.marginTop = -(oImg.offsetHeight-180)/2+"px";
            oImg.style.marginLeft = -(oImg.offsetWidth-260)/2+"px";
            aLi[i].style.opacity = scale;
            aLi[i].style.zIndex = parseInt(scale*10000);
        };
    };
});
</script>
</head>

<body>

<div id="div1">
    <ul>
        <li><img src="img2/1 (2).jpg" /></li>
        <li><img src="img2/2 (2).jpg" /></li>
        <li><img src="img2/3 (2).jpg" /></li>
        <li><img src="img2/4 (2).jpg" /></li>
        <li><img src="img2/5 (2).jpg" /></li>
        <li><img src="img2/6 (2).jpg" /></li>
        <li><img src="img2/7 (2).jpg" /></li>
    </ul>
</div>

</body>
</html>
